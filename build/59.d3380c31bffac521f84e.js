"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[59],{5550:(e,t,n)=>{n.d(t,{U:()=>l,g:()=>u.g});var r=n(4942),a=n(3562),o=n(5893);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=function(e){return(0,o.jsx)(a.k,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({direction:"row"},e))},u=n(4092)},2059:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var r=n(3007),a=n(1233),o=n(8979),i=n(4092),l=function(e){return e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_COUNTRY="INCORRECT_COUNTRY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR",e}({}),u=n(4942),s=n(1072),c=n(7294),d=n(5401),p=n(9319),f=n(9970),v=n(1715),b=n(8312),g=n(379),h=n(2949),x=function(e){return e.RUB="RUB",e.EUR="EUR",e.USD="USD",e}({}),m=n(5915),R=n(5550),O=n(5893),y=[{value:x.RUB,content:x.RUB},{value:x.EUR,content:x.EUR},{value:x.USD,content:x.USD}],C=(0,c.memo)((function(e){var t=e.className,n=e.value,a=e.onChange,o=e.readonly,i=(0,s.$G)().t,l=(0,c.useCallback)((function(e){null==a||a(e)}),[a]);return(0,O.jsxs)(R.U,{align:"center",gap:"8",children:[(0,O.jsx)("span",{children:i("Укажите валюту")}),(0,O.jsx)(m.w,{className:(0,r.A)("",{},[t]),items:y,value:n,onChange:l,readonly:o})]})})),j=function(e){return e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazahstan",e.Armenia="Armenia",e}({}),E=[{value:j.Armenia,content:j.Armenia},{value:j.Russia,content:j.Russia},{value:j.Belarus,content:j.Belarus},{value:j.Kazakhstan,content:j.Kazakhstan},{value:j.Ukraine,content:j.Ukraine}],S=(0,c.memo)((function(e){var t=e.className,n=e.value,a=e.onChange,o=e.readonly,i=(0,s.$G)().t,l=(0,c.useCallback)((function(e){null==a||a(e)}),[a]);return(0,O.jsxs)(R.U,{align:"center",gap:"8",children:[(0,O.jsx)("span",{children:i("Укажите страну")}),(0,O.jsx)(m.w,{className:(0,r.A)("",{},[t]),items:E,value:n,onChange:l,readonly:o,direction:"top right"})]})}));const T={ProfileCard:"wW9jgKKD",loading:"t07ZxFGs",error:"i5YK3SSb",editing:"DjTe7269"};var P=function(e){var t=e.className,n=e.data,a=e.isLoading,o=e.error,i=e.readonly,l=e.onChangeFirstname,c=e.onChangeLastname,d=e.onChangeAge,p=e.onChangeCity,f=e.onChangeAvatar,x=e.onChangeUsername,m=e.onChangeCountry,y=e.onChangeCurrency,j=(0,s.$G)("profile").t;if(a)return(0,O.jsx)(R.U,{justify:"center",max:!0,className:(0,r.A)(T.ProfileCard,(0,u.Z)({},T.loading,!0),[t]),children:(0,O.jsx)(g.a,{})});if(o)return(0,O.jsx)(R.U,{justify:"center",max:!0,className:(0,r.A)(T.ProfileCard,{},[t,T.error]),children:(0,O.jsx)(v.xv,{theme:v.lg.ERROR,title:j("Произошла ошибка при загрузке профиля"),text:j("Попробуйте обновить страницу"),align:v.PH.CENTER})});var E=(0,u.Z)({},T.editing,!i);return(0,O.jsxs)(R.g,{gap:"8",max:!0,className:(0,r.A)(T.ProfileCard,E,[t]),children:[(null==n?void 0:n.avatar)&&(0,O.jsx)(R.U,{justify:"center",max:!0,className:T.avatarWrapper,children:(0,O.jsx)(h.q,{src:null==n?void 0:n.avatar})}),(0,O.jsx)(b.I,{value:null==n?void 0:n.first,placeholder:j("Ваше имя"),className:T.input,onChange:l,readonly:i}),(0,O.jsx)(b.I,{value:null==n?void 0:n.lastname,placeholder:j("Ваша фамилия"),className:T.input,onChange:c,readonly:i}),(0,O.jsx)(b.I,{value:null==n?void 0:n.age,placeholder:j("Ваш возраст"),className:T.input,onChange:d,readonly:i}),(0,O.jsx)(b.I,{value:null==n?void 0:n.city,placeholder:j("Город"),className:T.input,onChange:p,readonly:i}),(0,O.jsx)(b.I,{value:null==n?void 0:n.username,placeholder:j("Введите имя пользователя"),className:T.input,onChange:x,readonly:i}),(0,O.jsx)(b.I,{value:null==n?void 0:n.avatar,placeholder:j("Введите ссылку на аватар"),className:T.input,onChange:f,readonly:i}),(0,O.jsx)(C,{className:T.input,value:null==n?void 0:n.currency,onChange:y,readonly:i}),(0,O.jsx)(S,{className:T.input,value:null==n?void 0:n.country,onChange:m,readonly:i})]})},N=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.form},I=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.isLoading},L=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.error},w=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.readonly},A=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.validateErrors},k=n(5861),D=n(4687),U=n.n(D),z=n(4268),M=(0,z.hg)("profile/fetchProfileData",function(){var e=(0,k.Z)(U().mark((function e(t,n){var r,a,o;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.extra,a=n.rejectWithValue,e.prev=1,e.next=4,r.api.get("/profile/".concat(t));case 4:if((o=e.sent).data){e.next=7;break}throw new Error;case 7:return e.abrupt("return",o.data);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",a("error"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),_=function(e){if(!e)return[l.NO_DATA];var t=e.first,n=e.lastname,r=e.age,a=e.country,o=[];return t&&n||o.push(l.INCORRECT_USER_DATA),r&&Number.isInteger(r)||o.push(l.INCORRECT_AGE),a||o.push(l.INCORRECT_COUNTRY),o},Z=(0,z.hg)("profile/updateProfileData",function(){var e=(0,k.Z)(U().mark((function e(t,n){var r,a,o,i,u,s;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.extra,a=n.rejectWithValue,o=n.getState,i=N(o()),!(u=_(i)).length){e.next=5;break}return e.abrupt("return",a(u));case 5:return e.prev=5,e.next=8,r.api.put("/profile/".concat(null==i?void 0:i.id),i);case 8:if((s=e.sent).data){e.next=11;break}throw new Error;case 11:return e.abrupt("return",s.data);case 14:return e.prev=14,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",a([l.SERVER_ERROR]));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}());function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=(0,z.oM)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,t){e.readonly=t.payload},cancelEdit:function(e){e.readonly=!0,e.validateErrors=void 0,e.form=e.data},updateProfile:function(e,t){e.form=V(V({},e.form),t.payload)}},extraReducers:function(e){e.addCase(M.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(M.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload})).addCase(M.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})).addCase(Z.pending,(function(e){e.validateErrors=void 0,e.isLoading=!0})).addCase(Z.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(Z.rejected,(function(e,t){e.isLoading=!1,e.validateErrors=t.payload}))}}),B=G.actions,Y=G.reducer,Q=n(5255),$=n(9717),W=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.data},K=(0,c.memo)((function(e){var t=e.className,n=(0,s.$G)("profile").t,a=(0,p.v9)($.m5),o=(0,p.v9)(W),i=(null==a?void 0:a.id)===(null==o?void 0:o.id),l=(0,p.v9)(w),u=(0,d.T)(),f=(0,c.useCallback)((function(){u(B.setReadonly(!1))}),[u]),b=(0,c.useCallback)((function(){u(B.cancelEdit())}),[u]),g=(0,c.useCallback)((function(){u(Z())}),[u]);return(0,O.jsxs)(R.U,{max:!0,justify:"between",className:(0,r.A)("",{},[t]),children:[(0,O.jsx)(v.xv,{title:n("Профиль")}),i&&(0,O.jsx)("div",{children:l?(0,O.jsx)(Q.zx,{theme:Q.bn.OUTLINE,onClick:f,children:n("Редактировать")}):(0,O.jsxs)(R.U,{gap:"8",children:[(0,O.jsx)(Q.zx,{theme:Q.bn.OUTLINE_RED,onClick:b,children:n("Отменить")}),(0,O.jsx)(Q.zx,{theme:Q.bn.OUTLINE,onClick:g,children:n("Сохранить")})]})})]})})),H={profile:Y},q=(0,c.memo)((function(e){var t,n=e.className,o=e.id,i=(0,s.$G)("profile").t,b=(0,d.T)(),g=(0,p.v9)(N),h=(0,p.v9)(I),x=(0,p.v9)(L),m=(0,p.v9)(w),y=(0,p.v9)(A),C=(t={},(0,u.Z)(t,l.SERVER_ERROR,i("Серверная ошибка при сохранении")),(0,u.Z)(t,l.INCORRECT_COUNTRY,i("Некорректный регион")),(0,u.Z)(t,l.NO_DATA,i("Данные не указаны")),(0,u.Z)(t,l.INCORRECT_USER_DATA,i("Имя и фамилия обязательны")),(0,u.Z)(t,l.INCORRECT_AGE,i("Некорректный возраст")),t);(0,f.Q)((function(){o&&b(M(o))}));var j=(0,c.useCallback)((function(e){b(B.updateProfile({first:e||""}))}),[b]),E=(0,c.useCallback)((function(e){b(B.updateProfile({lastname:e||""}))}),[b]),S=(0,c.useCallback)((function(e){b(B.updateProfile({city:e||""}))}),[b]),T=(0,c.useCallback)((function(e){b(B.updateProfile({age:Number(e||0)}))}),[b]),k=(0,c.useCallback)((function(e){b(B.updateProfile({username:e||""}))}),[b]),D=(0,c.useCallback)((function(e){b(B.updateProfile({avatar:e||""}))}),[b]),U=(0,c.useCallback)((function(e){b(B.updateProfile({currency:e}))}),[b]),z=(0,c.useCallback)((function(e){b(B.updateProfile({country:e}))}),[b]);return(0,O.jsx)(a.W,{reducers:H,children:(0,O.jsxs)(R.g,{gap:"8",max:!0,className:(0,r.A)("EditableProfileCard",{},[n]),children:[(0,O.jsx)(K,{}),(null==y?void 0:y.length)&&y.map((function(e){return(0,O.jsx)(v.xv,{theme:v.lg.ERROR,text:C[e]},e)})),(0,O.jsx)(P,{data:g,isLoading:h,error:x,readonly:m,onChangeFirstname:j,onChangeLastname:E,onChangeAge:T,onChangeCity:S,onChangeUsername:k,onChangeAvatar:D,onChangeCurrency:U,onChangeCountry:z})]})})})),J=n(9250),X={profile:Y};const ee=function(e){var t=e.className,n=(0,J.UO)().id;return(0,s.$G)("profile").t,(0,O.jsx)(a.W,{reducers:X,removeAfterUnmount:!0,children:(0,O.jsx)(o.T,{className:(0,r.A)("",{},[t]),children:(0,O.jsx)(i.g,{gap:"16",max:!0,children:(0,O.jsx)(q,{id:n})})})})}},1233:(e,t,n)=>{n.d(t,{W:()=>l});var r=n(885),a=n(7294),o=n(9319),i=n(5893),l=function(e){var t=e.children,n=e.reducers,l=e.removeAfterUnmount,u=void 0===l||l,s=(0,o.oR)(),c=(0,o.I0)();return(0,a.useEffect)((function(){var e=s.reducerManager.getMountedReducers();return Object.entries(n).forEach((function(t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];e[a]||(s.reducerManager.add(a,o),c({type:"@INIT ".concat(a," reducer")}))})),function(){u&&Object.entries(n).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1],s.reducerManager.remove(n),c({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,i.jsx)(i.Fragment,{children:t})}},8312:(e,t,n)=>{n.d(t,{I:()=>p});var r=n(4942),a=n(885),o=n(4925),i=n(3007),l=n(7294);var u=n(5893),s=["className","value","onChange","type","placeholder","autofocus","readonly"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=(0,l.memo)((function(e){var t=e.className,n=e.value,c=e.onChange,p=e.type,f=void 0===p?"text":p,v=e.placeholder,b=e.autofocus,g=e.readonly,h=(0,o.Z)(e,s),x=(0,l.useRef)(null),m=(0,l.useState)(!1),R=(0,a.Z)(m,2),O=R[0],y=R[1],C=(0,l.useState)(0),j=(0,a.Z)(C,2),E=j[0],S=j[1],T=O&&!g;return(0,l.useEffect)((function(){var e;b&&(y(!0),null===(e=x.current)||void 0===e||e.focus())}),[b]),(0,r.Z)({},"fTN1PnWu",g),(0,u.jsxs)("div",{className:(0,i.A)("LuFDUWoP",{},[t]),children:[v&&(0,u.jsx)("div",{className:"emAQQ85i",children:"".concat(v,">")}),(0,u.jsxs)("div",{className:"y1GiFC_L",children:[(0,u.jsx)("input",d({ref:x,type:f,value:n,onChange:function(e){null==c||c(e.target.value),S(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){y(!0)},onBlur:function(){y(!1)},onSelect:function(e){var t;S((null==e||null===(t=e.target)||void 0===t?void 0:t.selectionStart)||0)},readOnly:g},h)),T&&(0,u.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*E,"px")}})]})]})}))},5915:(e,t,n)=>{n.d(t,{w:()=>ne});var r=n(4942),a=n(7294),o=n(4192),i=n(5910),l=n(6723),u=n(3855);function s(e,t){let[n,r]=(0,a.useState)(e),o=(0,u.E)(e);return(0,l.e)((()=>r(o.current)),[o,r,...t]),n}var c,d=n(3784),p=n(5394),f=n(2984),v=n(2720),b=n(1363),g=n(1497),h=n(4103),x=n(4575),m=n(6567),R=n(4157),O=n(2966),y=((c=y||{})[c.None=1]="None",c[c.Focusable=2]="Focusable",c[c.Hidden=4]="Hidden",c);let C=(0,p.yV)((function(e,t){let{features:n=1,...r}=e,a={ref:t,"aria-hidden":2==(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&n)&&2!=(2&n)&&{display:"none"}}};return(0,p.sY)({ourProps:a,theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function j(e={},t=null,n=[]){for(let[r,a]of Object.entries(e))S(n,E(t,r),a);return n}function E(e,t){return e?e+"["+t+"]":t}function S(e,t,n){if(Array.isArray(n))for(let[r,a]of n.entries())S(e,E(t,r.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):j(n,t,e)}var T,P,N=n(5466),I=n(3781),L=n(476),w=n(5257),A=((P=A||{})[P.Open=0]="Open",P[P.Closed=1]="Closed",P),k=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(k||{}),D=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(D||{}),U=((T=U||{})[T.OpenListbox=0]="OpenListbox",T[T.CloseListbox=1]="CloseListbox",T[T.GoToOption=2]="GoToOption",T[T.Search=3]="Search",T[T.ClearSearch=4]="ClearSearch",T[T.RegisterOption=5]="RegisterOption",T[T.UnregisterOption=6]="UnregisterOption",T[T.RegisterLabel=7]="RegisterLabel",T);function z(e,t=(e=>e)){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=(0,x.z2)(t(e.options.slice()),(e=>e.dataRef.current.domRef.current)),a=n?r.indexOf(n):null;return-1===a&&(a=null),{options:r,activeOptionIndex:a}}let M={1:e=>e.dataRef.current.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.dataRef.current.disabled||0===e.listboxState)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,r=e.options.findIndex((e=>n(e.dataRef.current.value)));return-1!==r&&(t=r),{...e,listboxState:0,activeOptionIndex:t}},2(e,t){var n;if(e.dataRef.current.disabled||1===e.listboxState)return e;let r=z(e),a=(0,g.d)(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:a,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),a=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),o=a?e.options.indexOf(a):-1;return-1===o||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=z(e,(e=>[...e,n]));return null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),{...e,...r}},6:(e,t)=>{let n=z(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}},7:(e,t)=>({...e,labelId:t.id})},_=(0,a.createContext)(null);function Z(e){let t=(0,a.useContext)(_);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Z),t}return t}_.displayName="ListboxActionsContext";let F=(0,a.createContext)(null);function V(e){let t=(0,a.useContext)(F);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,V),t}return t}function G(e,t){return(0,f.E)(t.type,M,e,t)}F.displayName="ListboxDataContext";let B=a.Fragment,Y=p.AN.RenderStrategy|p.AN.Static,Q=(0,p.yV)((function(e,t){let{value:n,defaultValue:r,form:i,name:u,onChange:s,by:c=((e,t)=>e===t),disabled:v=!1,horizontal:b=!1,multiple:h=!1,...R}=e;const E=b?"horizontal":"vertical";let S=(0,d.T)(t),[T=(h?[]:void 0),P]=function(e,t,n){let[r,o]=(0,a.useState)(n),i=void 0!==e,l=(0,a.useRef)(i),u=(0,a.useRef)(!1),s=(0,a.useRef)(!1);return!i||l.current||u.current?!i&&l.current&&!s.current&&(s.current=!0,l.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(u.current=!0,l.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[i?e:r,(0,I.z)((e=>(i||o(e),null==t?void 0:t(e))))]}(n,s,r),[N,L]=(0,a.useReducer)(G,{dataRef:(0,a.createRef)(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),w=(0,a.useRef)({static:!1,hold:!1}),A=(0,a.useRef)(null),k=(0,a.useRef)(null),D=(0,a.useRef)(null),U=(0,I.z)("string"==typeof c?(e,t)=>{let n=c;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:c),z=(0,a.useCallback)((e=>(0,f.E)(M.mode,{1:()=>T.some((t=>U(t,e))),0:()=>U(T,e)})),[T]),M=(0,a.useMemo)((()=>({...N,value:T,disabled:v,mode:h?1:0,orientation:E,compare:U,isSelected:z,optionsPropsRef:w,labelRef:A,buttonRef:k,optionsRef:D})),[T,v,h,N]);(0,l.e)((()=>{N.dataRef.current=M}),[M]),(0,O.O)([M.buttonRef,M.optionsRef],((e,t)=>{var n;L({type:1}),(0,x.sP)(t,x.tJ.Loose)||(e.preventDefault(),null==(n=M.buttonRef.current)||n.focus())}),0===M.listboxState);let Z=(0,a.useMemo)((()=>({open:0===M.listboxState,disabled:v,value:T})),[M,v,T]),V=(0,I.z)((e=>{let t=M.options.find((t=>t.id===e));t&&q(t.dataRef.current.value)})),Y=(0,I.z)((()=>{if(null!==M.activeOptionIndex){let{dataRef:e,id:t}=M.options[M.activeOptionIndex];q(e.current.value),L({type:2,focus:g.T.Specific,id:t})}})),Q=(0,I.z)((()=>L({type:0}))),$=(0,I.z)((()=>L({type:1}))),W=(0,I.z)(((e,t,n)=>e===g.T.Specific?L({type:2,focus:g.T.Specific,id:t,trigger:n}):L({type:2,focus:e,trigger:n}))),K=(0,I.z)(((e,t)=>(L({type:5,id:e,dataRef:t}),()=>L({type:6,id:e})))),H=(0,I.z)((e=>(L({type:7,id:e}),()=>L({type:7,id:null})))),q=(0,I.z)((e=>(0,f.E)(M.mode,{0:()=>null==P?void 0:P(e),1(){let t=M.value.slice(),n=t.findIndex((t=>U(t,e)));return-1===n?t.push(e):t.splice(n,1),null==P?void 0:P(t)}}))),J=(0,I.z)((e=>L({type:3,value:e}))),X=(0,I.z)((()=>L({type:4}))),ee=(0,a.useMemo)((()=>({onChange:q,registerOption:K,registerLabel:H,goToOption:W,closeListbox:$,openListbox:Q,selectActiveOption:Y,selectOption:V,search:J,clearSearch:X})),[]),te={ref:S},ne=(0,a.useRef)(null),re=(0,o.G)();return(0,a.useEffect)((()=>{ne.current&&void 0!==r&&re.addEventListener(ne.current,"reset",(()=>{null==P||P(r)}))}),[ne,P]),a.createElement(_.Provider,{value:ee},a.createElement(F.Provider,{value:M},a.createElement(m.up,{value:(0,f.E)(M.listboxState,{0:m.ZM.Open,1:m.ZM.Closed})},null!=u&&null!=T&&j({[u]:T}).map((([e,t],n)=>a.createElement(C,{features:y.Hidden,ref:0===n?e=>{var t;ne.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0,...(0,p.oA)({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,name:e,value:t})}))),(0,p.sY)({ourProps:te,theirProps:R,slot:Z,defaultTag:B,name:"Listbox"}))))})),$=(0,p.yV)((function(e,t){var n;let r=(0,i.M)(),{id:l=`headlessui-listbox-button-${r}`,...u}=e,c=V("Listbox.Button"),f=Z("Listbox.Button"),v=(0,d.T)(c.buttonRef,t),x=(0,o.G)(),m=(0,I.z)((e=>{switch(e.key){case b.R.Space:case b.R.Enter:case b.R.ArrowDown:e.preventDefault(),f.openListbox(),x.nextFrame((()=>{c.value||f.goToOption(g.T.First)}));break;case b.R.ArrowUp:e.preventDefault(),f.openListbox(),x.nextFrame((()=>{c.value||f.goToOption(g.T.Last)}))}})),O=(0,I.z)((e=>{e.key===b.R.Space&&e.preventDefault()})),y=(0,I.z)((e=>{if((0,h.P)(e.currentTarget))return e.preventDefault();0===c.listboxState?(f.closeListbox(),x.nextFrame((()=>{var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),f.openListbox())})),C=s((()=>{if(c.labelId)return[c.labelId,l].join(" ")}),[c.labelId,l]),j=(0,a.useMemo)((()=>({open:0===c.listboxState,disabled:c.disabled,value:c.value})),[c]),E={ref:v,id:l,type:(0,R.f)(e,c.buttonRef),"aria-haspopup":"listbox","aria-controls":null==(n=c.optionsRef.current)?void 0:n.id,"aria-expanded":0===c.listboxState,"aria-labelledby":C,disabled:c.disabled,onKeyDown:m,onKeyUp:O,onClick:y};return(0,p.sY)({ourProps:E,theirProps:u,slot:j,defaultTag:"button",name:"Listbox.Button"})})),W=(0,p.yV)((function(e,t){let n=(0,i.M)(),{id:r=`headlessui-listbox-label-${n}`,...o}=e,u=V("Listbox.Label"),s=Z("Listbox.Label"),c=(0,d.T)(u.labelRef,t);(0,l.e)((()=>s.registerLabel(r)),[r]);let f=(0,I.z)((()=>{var e;return null==(e=u.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),v=(0,a.useMemo)((()=>({open:0===u.listboxState,disabled:u.disabled})),[u]);return(0,p.sY)({ourProps:{ref:c,id:r,onClick:f},theirProps:o,slot:v,defaultTag:"label",name:"Listbox.Label"})})),K=(0,p.yV)((function(e,t){var n;let r=(0,i.M)(),{id:l=`headlessui-listbox-options-${r}`,...u}=e,c=V("Listbox.Options"),h=Z("Listbox.Options"),x=(0,d.T)(c.optionsRef,t),R=(0,o.G)(),O=(0,o.G)(),y=(0,m.oJ)(),C=null!==y?(y&m.ZM.Open)===m.ZM.Open:0===c.listboxState;(0,a.useEffect)((()=>{var e;let t=c.optionsRef.current;t&&0===c.listboxState&&t!==(null==(e=(0,N.r)(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[c.listboxState,c.optionsRef]);let j=(0,I.z)((e=>{switch(O.dispose(),e.key){case b.R.Space:if(""!==c.searchQuery)return e.preventDefault(),e.stopPropagation(),h.search(e.key);case b.R.Enter:if(e.preventDefault(),e.stopPropagation(),null!==c.activeOptionIndex){let{dataRef:e}=c.options[c.activeOptionIndex];h.onChange(e.current.value)}0===c.mode&&(h.closeListbox(),(0,v.k)().nextFrame((()=>{var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case(0,f.E)(c.orientation,{vertical:b.R.ArrowDown,horizontal:b.R.ArrowRight}):return e.preventDefault(),e.stopPropagation(),h.goToOption(g.T.Next);case(0,f.E)(c.orientation,{vertical:b.R.ArrowUp,horizontal:b.R.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),h.goToOption(g.T.Previous);case b.R.Home:case b.R.PageUp:return e.preventDefault(),e.stopPropagation(),h.goToOption(g.T.First);case b.R.End:case b.R.PageDown:return e.preventDefault(),e.stopPropagation(),h.goToOption(g.T.Last);case b.R.Escape:return e.preventDefault(),e.stopPropagation(),h.closeListbox(),R.nextFrame((()=>{var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case b.R.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(h.search(e.key),O.setTimeout((()=>h.clearSearch()),350))}})),E=s((()=>{var e,t,n;return null!=(n=null==(e=c.labelRef.current)?void 0:e.id)?n:null==(t=c.buttonRef.current)?void 0:t.id}),[c.labelRef.current,c.buttonRef.current]),S=(0,a.useMemo)((()=>({open:0===c.listboxState})),[c]),T={"aria-activedescendant":null===c.activeOptionIndex||null==(n=c.options[c.activeOptionIndex])?void 0:n.id,"aria-multiselectable":1===c.mode||void 0,"aria-labelledby":E,"aria-orientation":c.orientation,id:l,onKeyDown:j,role:"listbox",tabIndex:0,ref:x};return(0,p.sY)({ourProps:T,theirProps:u,slot:S,defaultTag:"ul",features:Y,visible:C,name:"Listbox.Options"})})),H=(0,p.yV)((function(e,t){let n=(0,i.M)(),{id:r=`headlessui-listbox-option-${n}`,disabled:o=!1,value:s,...c}=e,f=V("Listbox.Option"),b=Z("Listbox.Option"),h=null!==f.activeOptionIndex&&f.options[f.activeOptionIndex].id===r,x=f.isSelected(s),m=(0,a.useRef)(null),R=(0,w.x)(m),O=(0,u.E)({disabled:o,value:s,domRef:m,get textValue(){return R()}}),y=(0,d.T)(t,m);(0,l.e)((()=>{if(0!==f.listboxState||!h||0===f.activationTrigger)return;let e=(0,v.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=m.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[m,h,f.listboxState,f.activationTrigger,f.activeOptionIndex]),(0,l.e)((()=>b.registerOption(r,O)),[O,r]);let C=(0,I.z)((e=>{if(o)return e.preventDefault();b.onChange(s),0===f.mode&&(b.closeListbox(),(0,v.k)().nextFrame((()=>{var e;return null==(e=f.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))})),j=(0,I.z)((()=>{if(o)return b.goToOption(g.T.Nothing);b.goToOption(g.T.Specific,r)})),E=(0,L.g)(),S=(0,I.z)((e=>E.update(e))),T=(0,I.z)((e=>{E.wasMoved(e)&&(o||h||b.goToOption(g.T.Specific,r,0))})),P=(0,I.z)((e=>{E.wasMoved(e)&&(o||h&&b.goToOption(g.T.Nothing))})),N=(0,a.useMemo)((()=>({active:h,selected:x,disabled:o})),[h,x,o]);return(0,p.sY)({ourProps:{id:r,ref:y,role:"option",tabIndex:!0===o?void 0:-1,"aria-disabled":!0===o||void 0,"aria-selected":x,disabled:void 0,onClick:C,onFocus:j,onPointerEnter:S,onMouseEnter:S,onPointerMove:T,onMouseMove:T,onPointerLeave:P,onMouseLeave:P},theirProps:c,slot:N,defaultTag:"li",name:"Listbox.Option"})})),q=Object.assign(Q,{Button:$,Label:W,Options:K,Option:H});var J=n(3007),X=n(5255),ee=n(5893),te={"bottom right":"Jl5DRf3z","bottom left":"oFXYv034","top right":"c68gv_LQ","top left":"aacUeHXS"};function ne(e){var t=e.items,n=e.className,o=e.value,i=e.defaultValue,l=e.onChange,u=e.readonly,s=e.direction,c=[te[void 0===s?"bottom right":s]];return(0,ee.jsxs)(q,{value:o,onChange:l,as:"div",className:(0,J.A)("LsvjvEi8",{},[n]),disabled:u,children:[(0,ee.jsx)(q.Button,{className:"qrO2mTX9",as:"div",children:(0,ee.jsx)(X.zx,{disabled:u,children:null!=o?o:i})}),(0,ee.jsx)(q.Options,{className:(0,J.A)("V57wMCSt",{},c),children:null==t?void 0:t.map((function(e){return(0,ee.jsx)(q.Option,{value:e.value,disabled:e.disabled,as:a.Fragment,children:function(t){var n,a=t.active,o=t.selected;return(0,ee.jsx)("li",{className:(0,J.A)("mBjSAlwm",(n={},(0,r.Z)(n,"lE7gaHdr",a),(0,r.Z)(n,"wy24Xd14",o),(0,r.Z)(n,"yYTJVDnW",e.disabled),n)),children:e.content})}},e.value)}))})]})}}}]);